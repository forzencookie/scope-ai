/**
 * Client-side Stripe singleton
 *
 * Lazily loads Stripe.js once and reuses the instance.
 * Used by EmbeddedCheckoutProvider on the checkout page.
 */

import { loadStripe, type Stripe } from '@stripe/stripe-js'

let stripePromise: Promise<Stripe | null> | null = null

export function getStripeClient() {
    if (!stripePromise) {
        stripePromise = loadStripe(
            process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY!
        )
    }
    return stripePromise
}
